---
title: "Rick Hutchison Mung Project"
subtitle: "Data organization"
author: "Rick Hutchison"
date: '`r format(Sys.time(), "Last modified: %d %b %Y")`'
output:
  
  pdf_document:
    
    latex_engine: xelatex
    number_sections: yes
    toc: yes
    toc_depth: 4
  html_document:
    toc: yes
    toc_float: yes
    theme: flatly
    df_print: paged  
  bookdown::gitbook:
    self_contained: true
    split_by: none
    sharing: null
  word_document: default
  html_notebook:
    toc: yes
    toc_float: yes
    theme: flatly
    df_print: paged
editor_options: 
  chunk_output_type: console
linkcolor: red
urlcolor: red
---

# Setup and datasets

I will be concentrating on these variables.

NY.GDP.MKTP.CD	GDP (current US$)


BX.GSR.CMCP.ZS	Communications, computer, etc. (% of service exports, BoP)

BX.GSR.ROYL.CD	Charges for the use of intellectual property, receipts (BoP, current US$)

NY.ADJ.AEDU.CD	Adjusted savings: education expenditure (current US$)

NY.GSR.NFCY.CD	Net income from abroad (current US$)









```{r}
  # install.packages('data.table')
  # install.packages('reshape2')
  # install.packages('ggplot2')
  # install.packages('tidyverse')
  # install.packages('plotly')
  # install.packages('listviewer')
  # install.packages('gapminder')
  library(data.table)
  library(tidyverse)
  library(ggplot2)
  library(plotly)
  library(listviewer)
  library(gapminder)
library(ggvis)
```


import data set (imported from my desktop)
```{R}
  # World bank dataset Developement indicators
  mp.complete <- fread("/Users/Hutch/Desktop/mung.joint/MP.csv", header=TRUE)


```
.
trim data of empty rows.   left with  years [2011-2017]
```{r}
  
 # will
   # Remove year  columns for years 1960        - 1999
    # leave 2000 - 2019
    #remove col 3 so my code matches              Ryba's code
#remove early empty years
  mp.2017<- mp.complete[,-c(5:44), with=F]
#view(mp.2017)
#ncol(mp.2017)

#remove 2018:2020 plus weird extra column
mp.2017<- mp.2017[,-c(23:26), with=F]
#ncol(mp.2017)

#remvove col 3 because Reba did
mp.2017 <- mp.2017[,-c(3)]
#ncol(mp.2017)
#view(mp.2017)
```

```{R}
str(mp.2017)
nrow(mp.2017)
```
64680 rows

```{R}
  # Create a tidier version (features as columns, observations as rows)
  
# Collapse year columns into one
mp.ts <- gather(mp.2017, Year, "Value", 4:21)
view(mp.ts)


# Standardize names  because some of the names have blank spaces
  names(mp.ts) <- make.names(names(mp.ts))        

  
mp.ts <- spread(mp.ts, Indicator.Code, Value)   
# Spread Indicator.Code to multiple columns
view(mp.ts) 
nrow(mp.ts)
ncol(mp.ts)
```



summary(na.prop)
   Min. 1st Qu.  Median    Mean 3rd Qu. 
 0.0000  0.1752  0.2660  0.2871  0.3439 
   Max. 
 0.9499 
```{R}
  # Check missingness proportion (from validation notes)
  na.prop <- apply(mp.ts, 2, function(x) sum(is.na(x)/length(x)) )
#view(na.prop)
  # We select some variables of interest 
  #na.prop[order(na.prop)][4:20]  
  # keep all variable
```


i did not filter data based on null values.


since al the countries are still in the data set the bad columns may be relelated to columns we will never use.  I figure we can test again when we decide which countires adn variables we are going to plot
```{R}



```

Not sure what this code does

  # What are the names of elements with few NAs?
 # meta <- fread("/Users/Hutch/Desktop/Metadata_Indicator.csv", header=TRUE) 
  # From metadata indicator .csv
#data.frame(names(na.prop[order(na.prop)][4:20]),
meta[meta$INDICATOR_CODE %in% names(na.prop[order(na.prop)][4:20]),]$INDICATOR_NAME)










